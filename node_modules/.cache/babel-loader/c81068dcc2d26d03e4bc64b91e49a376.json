{"ast":null,"code":"var _jsxFileName = \"/Users/taha/REACT/weather-app/src/App.js\";\nimport React from 'react';\nimport './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.abortController = new AbortController();\n    this.controllerSignal = this.abortController.signal;\n\n    this.weatherStart = () => {\n      const successful = position => {\n        this.setState({\n          status: 'fetching'\n        });\n        this.getWeatherData(position.coords.latitude, position.coords.longitude);\n      };\n\n      const unsuccessful = () => {\n        this.setState({\n          status: 'unable'\n        });\n        alert(\"Can't find your location\");\n      };\n\n      if (navigator.geolocation) {\n        this.setState({\n          status: 'fetching'\n        });\n        navigator.geolocation.getCurrentPosition(successful, unsuccessful);\n      } else {\n        this.setState({\n          status: 'unsupported'\n        });\n        alert('Location feature is not supported by your browser');\n      }\n    };\n\n    this.getWeatherData = (latitude, longitude) => {\n      const weatherApi = `http://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=metric&appid=${process.env.REACT_APP_WEATHER_KEY}`;\n      fetch(weatherApi, {\n        signal: this.controllerSignal\n      }).then(response => response.json()).then(result => {\n        console.log(result);\n        const {\n          name\n        } = result;\n        const {\n          country\n        } = result.sys;\n        const {\n          temp,\n          temp_min,\n          temp_max,\n          feels_like,\n          humidity\n        } = result.main;\n        const {\n          description,\n          icon\n        } = result.weather[0];\n        const {\n          speed,\n          deg\n        } = result.wind;\n        this.setState({\n          isLoaded: true,\n          weatherData: {\n            name,\n            country,\n            description,\n            icon,\n            temp: temp.toFixed(1),\n            feels_like: feels_like.toFixed(1),\n            temp_min: temp_min.toFixed(1),\n            temp_max: temp_max.toFixed(1),\n            speed,\n            deg,\n            humidity\n          }\n        });\n      }, error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      });\n    };\n\n    this.state = {\n      status: 'init',\n      isLoaded: false,\n      weatherData: null\n    };\n  }\n\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  componentDidMount() {\n    this.weatherStart();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, \"Weather App\"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/taha/REACT/weather-app/src/App.js"],"names":["React","App","Component","constructor","props","abortController","AbortController","controllerSignal","signal","weatherStart","successful","position","setState","status","getWeatherData","coords","latitude","longitude","unsuccessful","alert","navigator","geolocation","getCurrentPosition","weatherApi","process","env","REACT_APP_WEATHER_KEY","fetch","then","response","json","result","console","log","name","country","sys","temp","temp_min","temp_max","feels_like","humidity","main","description","icon","weather","speed","deg","wind","isLoaded","weatherData","toFixed","error","state","componentWillUnmount","abort","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: 'init',\n      isLoaded: false,\n      weatherData: null\n    }\n  }\n\n  abortController = new AbortController();\n  controllerSignal = this.abortController.signal;\n\n  weatherStart = () => {\n    const successful = (position) => {\n      this.setState({status: 'fetching'});\n      this.getWeatherData(position.coords.latitude, position.coords.longitude);\n    }\n    const unsuccessful = () => {\n      this.setState({status: 'unable'});\n      alert(\"Can't find your location\");\n    }\n\n    if (navigator.geolocation) {\n      this.setState({status: 'fetching'});\n      navigator.geolocation.getCurrentPosition(successful, unsuccessful);\n    } else {\n      this.setState({status: 'unsupported'});\n      alert('Location feature is not supported by your browser');\n    }\n\n  }\n\n  getWeatherData = (latitude, longitude) => {\n    const weatherApi = `http://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=metric&appid=${process.env.REACT_APP_WEATHER_KEY}`;\n  \n    fetch(weatherApi, { signal: this.controllerSignal })\n    .then(response => response.json())\n    .then(\n      (result) => {\n  \n        console.log(result);\n  \n        const { name } = result;\n        const { country } = result.sys;\n        const { temp, temp_min, temp_max, feels_like, humidity } = result.main;\n        const { description, icon } = result.weather[0];\n        const { speed, deg } = result.wind;\n  \n        this.setState({\n          isLoaded: true,\n          weatherData: {\n            name,\n            country,\n            description,\n            icon,\n            temp: temp.toFixed(1),\n            feels_like: feels_like.toFixed(1),\n            temp_min: temp_min.toFixed(1),\n            temp_max: temp_max.toFixed(1),\n            speed,\n            deg,\n            humidity\n          }\n        });\n      },\n      (error) => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      }\n    );\n  }\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  componentDidMount() {\n    this.weatherStart();\n  }\n  render() {\n    return (\n      <div className='App'>\n        <div className='container'>\n        Weather App\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}